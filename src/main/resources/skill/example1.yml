__option__:
  name: "x1"
  icon-formatter:
    material: DIAMOND_SWORD
  variables:
    cooldown: 100
    damage: 32 * &ctx :: level() + 100
    rectX: [ 4, 1, 3, 4 ]
    rectZ: [ 2, 4, 3, 3 ]

action: |
  def main() {
    # 获取当前状态索引，默认为 0
    let idx = if sender :: hasMetadata("x1.status")
              then sender :: getMetadata("x1.status")
              else 0

    # 获取当前坐标
    let x = &rectX[idx]
    let z = &rectZ[idx]

    tell("idx=${idx},x=${x}, z=${z}")

    # 检查是否到达最后一个索引
    if idx == 3 {
      idx = -1
    }

    # 更新状态
    sender :: setMetadata("x1.status", idx + 1)
  }
