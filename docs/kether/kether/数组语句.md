# Kether 数组语句

Kether 提供了丰富的数组操作功能，包括数组创建、元素访问、添加、删除、查找等操作。

## 语法格式说明

Kether 使用前缀表达式语法，数组定义必须遵循严格的格式要求：

- **括号空格必须**：`[` 和 `]` 前后必须包含空格
- **元素空格分隔**：数组元素之间使用空格分隔，不能使用逗号
- **前缀表达式结构**：使用 `array` 或 `arr` 作为前缀操作符

## 数组创建

### 创建数组
```kotlin
array [ 元素1 元素2 元素3 ]
arr [ 元素1 元素2 元素3 ]
```

**格式要求：**
- `array` 或 `arr` 后面必须有空格
- `[` 前后必须有空格
- 元素之间用空格分隔
- `]` 前后必须有空格

**示例：**
```kotlin
set arr to array [ "apple" "banana" "orange" ]
set list to arr [ 1 2 3 4 5 ]
```

## 数组属性访问

### 获取数组长度
```kotlin
size &数组
length &数组
```

**示例：**
```kotlin
set len to size &arr
print length &list
```

### 通过索引访问元素
```kotlin
&数组.索引
```

**示例：**
```kotlin
set first to &arr.0
set last to &list.(-1)
```

## 数组转换

### 转换为可变列表
```kotlin
mutable &数组
```

**示例：**
```kotlin
set mutable_arr to mutable &arr
```

### 打乱数组顺序
```kotlin
shuffle &数组
```

**示例：**
```kotlin
set shuffled to shuffle &arr
```

### 反转数组顺序
```kotlin
reverse &数组
```

**示例：**
```kotlin
set reversed to reverse &arr
```

## 元素操作

### 获取指定位置的元素
```kotlin
arr-get 索引 in &数组
element 索引 in &数组
elem 索引 in &数组
```

**示例：**
```kotlin
set item to arr-get 1 in &arr
set first to elem 0 in &list
```

### 添加元素到数组末尾
```kotlin
arr-add 元素 to &数组
```

**示例：**
```kotlin
arr-add "grape" to &arr
```

### 添加元素到数组开头
```kotlin
arr-add-first 元素 to &数组
arr-push 元素 to &数组
```

**示例：**
```kotlin
arr-add-first "lemon" to &arr
arr-push "peach" to &list
```

### 移除元素
```kotlin
arr-remove 元素 in &数组
```

**示例：**
```kotlin
arr-remove "banana" in &arr
```

### 移除指定位置的元素
```kotlin
arr-remove-at 索引 in &数组
```

**示例：**
```kotlin
arr-remove-at 1 in &arr
```

### 移除第一个元素
```kotlin
arr-remove-first &数组
arr-take &数组
```

**示例：**
```kotlin
set first to arr-remove-first &arr
```

### 移除最后一个元素
```kotlin
arr-remove-last &数组
arr-drop &数组
```

**示例：**
```kotlin
set last to arr-remove-last &arr
```

### 查找元素位置
```kotlin
arr-find 元素 in &数组
```

**示例：**
```kotlin
set index to arr-find "apple" in &arr
```

## 实用示例

### 遍历数组
```kotlin
set fruits to array [ "apple" "banana" "orange" ]
foreach &fruits as fruit
    print "fruit: {fruit}"
end
```

### 数组过滤
```kotlin
set numbers to array [ 1 2 3 4 5 6 ]
set even_numbers to array [ ]
foreach &numbers as num
    if num % 2 == 0
        arr-add num to &even_numbers
    end
end
```

### 数组映射
```kotlin
set numbers to array [ 1 2 3 4 5 ]
set squares to array [ ]
foreach &numbers as num
    arr-add num * num to &squares
end
```

## 注意事项

1. **数组索引**从0开始
2. **负索引**表示从数组末尾开始计数（-1表示最后一个元素）
3. **数组操作**会修改原数组，使用前请确保需要修改
4. **空数组**支持所有操作，返回空结果或空数组
5. **类型安全**：Kether会自动处理类型转换，但建议保持数据类型一致性

## 性能建议

- 对于频繁修改的数组，建议先使用 `mutable` 转换
- 批量操作时，考虑使用数组推导式而不是循环
- 大型数组操作时注意性能影响